FROM bitnami/node:18
ENV APP_ROOT=/test

COPY ./test ${APP_ROOT}
WORKDIR ${APP_ROOT}
RUN install_packages python3 xvfb python3-dev libssl-dev libffi-dev
RUN ln -sf python3 /usr/bin/python && \
 python3 -m ensurepip && \
 pip3 install --no-cache --upgrade pip && \
 pip3 install --no-cache setuptools && \
 pip3 install --no-cache -r requirements.txt && \
  npx playwright install-deps
RUN rfbrowser init
